---
layout:post
title:CSAPP笔记
---

链接（linking）：将各种代码和数据部分收集起来并组合成单一的文件的过程。链接可以执行与编译、加载和执行时。

Unix> gcc -02 –g p main.c swap.c // 调用GCC驱动器（预处理器，编译器，汇编器，链接器）

可重定位目标文件（relocatable object file）:各种不同的代码和数据节组成，指令，初始化的全局变量，未初始化的变量。

静态链接器（static linker）:以一组可重定位目标文件和命令行参数作为输入，生成一个可以完全链接的可以加载和运行的可执行目标文件作为输出。
可重定位目标文件 包含二进制代码和数据
   
目标文件       可执行目标文件 可以拷贝到存储器并执行

共享目标文件  可以加载或者运行时被动态地加载到存储器并链接

链接器中的三中符号：由m定义并能被其他模块引用的全局符号；由其他模块定义引用的其他模块的全局符号；只被模块m定义和引用的本地符号（注意是静态函数或者全局变量带static）

利用static隐藏变量和函数名字(模块私有)

静态库（static library）：所有相关的目标模块打包成一个单独的文件。

链接器如何使用静态库来解析引用：
1.	对于命令行上的每个输入文件f，链接器会判断f是一个目标文件还是存档文件。如果是目标文件，则把它加入到集合E中，修改U和D来反映f中的符号定义和引用，并继续下一个输入文件
2.	如果f是一个存档文件，那么链接器尝试匹配U中为解析的符号和由存档文件成员定义的符号。如果某个存档文件成员m，定义了一个符号来解析U中的一个引用，那么久将m加到E中，并且链接器修改U和D来反映m中符号定义和引用，对存档文件中所有的目标文件都反复进行这个过程，直到U和D都不在变化。此时，任何不包含在E中的成员目标文件都被丢弃，继续下一个输入文件。
3.	如果链接器完成命令行上所有的文件扫描后，U非空则链接器会输出一个错误并终止。
